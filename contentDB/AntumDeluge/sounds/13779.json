{"author":"AntumDeluge","content_warnings":[],"created_at":"2021-06-15T19:31:55.871894","dev_state":null,"donate_url":null,"downloads":1914,"forum_url":"https://forum.luanti.org/viewtopic.php?t=26868","forums":26868,"game_support":[],"issue_tracker":"https://github.com/AntumMT/mod-sounds/issues","license":"MIT","long_description":"### Description\n\nA mod that provides a set of free sounds & methods.\n\n*(For a headache, listen to [these sounds](https://antummt.github.io/mod-sounds/reference/latest/topics/groups.html#sounds.chalk_screech))*\n\nWhat is the purpose of this mod? There are four ideas behind `sounds`:\n\n1. It is intended as a more universal method for adding sounds to games rather than depending on [MTG & default](https://github.com/minetest/minetest_game/tree/master/mods/default) for sounds only. It is completely compatible with default sounds. The same methods called in `default` to set node sounds, like `default.node_sound_stone_defaults`, are implemented & it can be installed in parallel. *Section: [Replacement for default](#replacement-for-default)*\n2. It is simply a well of sounds. Many sound files are provided & can be used with [minetest.sound_play](https://minetest.gitlab.io/minetest/minetest-namespace-reference/#sounds) just as normal. There is also a wrapper function, `sounds.play`, that does its best to verify that a sound played successfully. If so, it will return a sound handle ID. Otherwise it will return `nil`. It also caches all loaded mod sounds after server startup in `sounds.cache` table. So sound files can easily be checked for existence. *Section: [Checking for Existing Sounds](#checking-for-existing-sounds)*\n3. It adds callable sound groups that can be used to play specified individual sounds, or a random sound in the group. The benefit to this is that the file naming convention is irrelivent. The only thing that matters is that the sound file is registered with the group. *Section: [Playing Sounds Manually](#playing-sounds-manually)*\n4. Adds an API for setting biome ambiance sounds.\n\nNote that most included sounds have been set with a peak amplitude of -6.0db.\n\n### Licensing\n\n- Code: [MIT](https://github.com/AntumMT/mod-sounds/blob/master/LICENSE.txt)\n- Icon/Screenshot: [CC0](https://openclipart.org/detail/260975)\n- Media: multiple (see [sources.md](https://github.com/AntumMT/mod-sounds/blob/master/sources.md))\n\n### Usage\n\n<a name=\"replacement-for-default\"></a>\n##### Replacement for default\n\nIf your mod depends on *default* for node sounds only, then you can easily switch to *sounds*. Simply add *default* & *sounds* as optional dependencies in your *mod.conf*. *sounds* overrides methods used by *default* to its own. For example *default.node_sound_dirt_defaults*.\n\nExample of overidden method:\n```lua\nfunction sounds.node_dirt(tbl)\n\ttbl = tbl or {}\n\n\ttbl.footstep = tbl.footstep or {name=\"sounds_dirt_step\", gain=0.4}\n\ttbl.dug = tbl.dug or {name=\"sounds_dirt_step\", gain=1.0}\n\ttbl.place = tbl.place or {name=\"sounds_node_place_soft\", gain=1.0}\n\n\tsounds.node(tbl)\n\treturn tbl\nend\n\ndefault.node_sound_dirt_defaults = sounds.node_dirt\n```\n\nExample of setting node sounds:\n```lua\nminetest.register_node(\"foo:bar\", {\n\tdescription = \"Foo Node\",\n\t-- this is the same as calling `sounds.node_stone()`\n\tsounds = default.node_sound_stone_defaults()\n\t...\n})\n```\n\n##### <a name=\"playing-sounds-manually\">Playing Sounds Manually</a>\n\n`SoundGroup` instances are objects for storing & playing sounds. These objects can be called to play a sound from their group. An index can be specified when called to determine which sound to play. If the index parameter is omitted, a random sound will be picked. A table of arguments can also be passed. This is compatible with [SimpleSoundSpec](https://minetest.gitlab.io/minetest/sounds/#simplesoundspec).\n\nCreating `SoundGroup` objects:\n```lua\nlocal s_group1 = SoundGroup({\"sound1\", \"sound2\"})\nlocal s_group2 = SoundGroup({\"sound3\", \"sound4\", \"sound5\"})\n\n-- SoundGroup objects can be concatenated with the arithmetic operator\nlocal s_group3 = s_group1 + s_group2\n\n-- strings can also be concatenated to group with arithmetic operator\ns_group3 = s_group3 + \"sound6\"\n\n-- to prevent sound file names from being prefixed with \"sounds_\" when played,\n-- the `no_prepend` field must be set to `true`\ns_group1(2) -- plays \"sounds_sound2\"\n\ns_group1.no_prepend = true\ns_group1(2) -- plays \"sound2\"\n```\n\nThere are many [pre-defined sound groups](https://antummt.github.io/mod-sounds/reference/latest/topics/groups.html).\n\nCalling a `SoundGroup` object:\n```lua\n-- play random sound from group\nsounds.horse_neigh()\n\n-- play specific sound from group\nsounds.horse_neigh(2)\n\n-- play random sound from group with parameters\nsounds.horse_neigh({gain=1.0})\n\n-- play specific sound from group with parameters\nsounds.horse_neigh(2, {gain=1.0})\n\n-- the `play` method is the same as calling the object directly\nsounds.horse_neigh:play(2, {gain=1.0})\n```\n\nSee [sources.md](https://github.com/AntumMT/mod-sounds/blob/master/sources.md) for list of included sounds. And [preview sounds here](https://antummt.github.io/mod-sounds/reference/latest/topics/groups.html).\n\n##### Node Sounds\n\n`SoundGroup` objects can also be used in node registration:\n```lua\nminetest.register_node(\"foo:bar\", {\n\tdescription = \"Foo Node\",\n\tsounds = {\n\t\t-- a random sound from the `sounds.cow_moo` group will be played when digging this node\n\t\tdig = sounds.cow_moo,\n\t},\n\t...\n```\n\nCurrently using `SoundGroup` for node sounds only works for \"dig\", \"dug\", & \"place\".\n\n`SoundGroup` objects are tables & are indexed by integer. But using the `get` method is more reliable as it will return the string name with \"sounds_\" prefix if `no_prepend` isn't set:\n```lua\nlocal s_group1 = SoundGroup({\"sound1\", \"sound2\"})\nlocal s1 = s_group1:get(1) -- returns \"sounds_sound1\"\nlocal s2 = s_group1[2] -- returns \"sound2\"\n\nlocal s_group2 = SoundGroup({\"sound3\", \"sound4\", no_prepend=true})\nlocal s3 = s_group2:get(1) -- returns \"sound3\"\nlocal s4 = s_group2[2] -- returns \"sound4\"\n```\n\nThe built-in `type` function can be used to check for a `SoundGroup` instance:\n```lua\nif type(s_group1) == \"SoundGroup\" then\n\ts_group1()\nend\n```\n\n##### <a name=\"checking-for-existing-sounds\">Checking for Existing Sounds</a>\n\nAll mod sound files are stored in the global table `sounds.cache` after server startup. Checking if a file exists for playing is simple:\n\n```lua\nif sounds.cache[\"default_dig_crumbly\"] then\n\tcore.sound_play(\"default_dig_crumbly\")\nend\n```\n\n##### Testing Sounds\n\nIf setting `sounds.enable_tests` is enabled, the chat command `/sounds_tests` can be used to show a formspec for playing & testing sounds.\n\nTo test *any* sound, input the sound name in the \"Manual play\" field & press the corresponding \"Play\" button. If the sound file exists, it will play & some info will be filled in the \"Last played\" field.\n\nTo test sounds cached in sound groups, select a group in the left column of the \"Group play\" field. Then select a sound in the right column & press the corresponding \"Play\" button.\n\nSounds can be looped by checking the \"Loop\" box.\n\n##### Biome Ambiance\n\nA sound group can be registered for playing sounds randomly in a biome with the `sounds:register_biome_sounds` method (`sounds.enable_biome_sounds` must be enabled):\n\n```\nsounds:register_biome_sounds(biome, snds, params)\n- Registers a sound group to be played in a biome.\n- parameters:\n  - biome:  Biome name.\n  - snds:   string, table, or SoundGroup of sounds registered with biome.\n  - params: SimpleSoundSpec parameters (optional).\n```\n\nExample usage:\n```lua\nsounds:register_biome_sounds(\"grassland\", sounds.bird, {gain=0.25})\n```\n\n##### Settings\n\n```\nsounds.disabled_groups\n- Disables individual built-in sound groups categories. \"all\" disables all categories.\n- type:    string (comma-separated list)\n- default: empty\n\nsounds.enable_tests\n- Enables sounds testing with sounds_tests chat command.\n- type:    bool\n- default: false\n\nsounds.enable_biome_sounds\n- Enables/Disables ambiance sounds for biomes.\n- type:    bool\n- default: false\n\nsounds.biome_interval\n- Interval between playing biome sounds.\n- type:    int\n- min:     5\n- default: 30\n\nsounds.biome_chance\n- Chance that sound will be played at interval.\n- type:    int\n- min:     0\n- max:     100\n- default: 20\n```\n\n### Links\n\n- [Reference](https://antummt.github.io/mod-sounds/reference/latest/)\n- [Changelog](https://github.com/AntumMT/mod-sounds/blob/master/changelog.txt)\n- [TODO](https://github.com/AntumMT/mod-sounds/blob/master/TODO.txt)","maintainers":["AntumDeluge"],"media_license":"CC-BY-SA-4.0","name":"sounds","provides":["sounds"],"release":13779,"repo":"https://github.com/AntumMT/mod-sounds","score":158.2,"screenshots":["https://content.luanti.org/uploads/3aadaed648.png","https://content.luanti.org/uploads/933125cb64.png"],"short_description":"A set of free sounds & API.","state":"APPROVED","tags":["environment","library"],"thumbnail":"https://content.luanti.org/thumbnails/1/3aadaed648.png","title":"Sounds","translation_url":null,"type":"mod","url":"https://content.luanti.org/packages/AntumDeluge/sounds/releases/13779/download/","video_thumbnail_url":null,"video_url":null,"website":null,"dependencies":{"AntumDeluge/sounds":[]},"hash":"0021b55in47ghmw76gk2hh5zfcx6zgz2k1c40kk4w6r7rhdw39w5"}
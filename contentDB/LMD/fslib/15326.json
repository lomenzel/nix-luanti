{"author":"LMD","content_warnings":[],"created_at":"2022-06-15T13:10:55.199772","dev_state":"ACTIVELY_DEVELOPED","donate_url":null,"downloads":1726,"forum_url":"https://forum.luanti.org/viewtopic.php?t=28261","forums":28261,"game_support":[],"issue_tracker":"https://github.com/appgurueu/fslib/issues","license":"MIT","long_description":"# Formspec Library (`fslib`)\n\nA tiny Minetest library mod to facilitate managing formspecs.\n\nWritten by Lars MÃ¼ller alias [appgurueu](https://github.com/appgurueu) and licensed under the terms of the MIT license.\n\nLinks:\n\n* [GitHub](https://github.com/appgurueu/fslib)\n\n## API\n\n### `fslib.build_formspec(formspec_table)`\n\nBuilds a formspec string out of a table of S-expressions; purely a string building helper\nentirely unaware of formspec semantics: Everything must properly use the table formats no matter the context.\n\nSubtables of formspec tables take the form `{\"element_name\", ...}`, where `...` may consist of:\n\n* Strings to be escaped;\n* Numbers to be formatted using `%d` (integers) or `%f` (floats);\n* Booleans to be formatted as `true` or `false`;\n* A subtable:\n\t* An options table `{[option] = value}`\n\t* A sublist to which the same formatting rules apply but which will use `,` instead of `;` as delimiter (e.g. coordinates);\n\t* A hypertext table created by through the use of `fslib.hypertext_root{fslib.hypertext_tags.tag{attr = value, child_1, child_2, \"text\", ...}}`\n\t\t* **Tip:** Localize `local tags = fslib.hypertext_tags`\n\n### `formspec_name = fslib.show_formspec(player, formspec, handler)`\n\n* `player`: PlayerRef (ObjectRef)\n* `formspec`: Formspec in string or table format (see `fslib.build_formspec`)\n* `handler`: `function(fields) return next_formspec` which is called as the form is submitted\n\t* `fields`: Submitted formspec fields as provided by the engine\n\t* `next_formspec`: If returned, the formspec will be reshown by sending the `next_formspec`; `player` & `handler` stay the same\n\t* **Tip:** Use upvalues of `handler` - including the `player` - as context!\n* Returns an ID `formspec_name` which can be used to reshow the formspec\n\t* **Tip:** If you don't need to reshow the formspec with the same name or can reshow it by returning a new formspec inside the handler you should not use this.\n\n### `fslib.reshow_formspec(player, formspec_name, formspec)`\n\nReshows (\"updates\") the formspec reusing the name. `formspec` may be a `formspec_table`.\n\n### `fslib.close_formspec(player)`\n\nCloses whichever formspec was last shown to `player` using `fslib`.\n\n**Tip:** If possible use `exit` elements in the formspec instead for a better user experience and to [work around a bug](https://github.com/minetest/minetest/issues/11907).\n\n### Example\n\n```lua\nlocal delete_confirmation_fs = fslib.build_formspec{\n\t{\"size\", {6, 1, false}},\n\t{\"real_coordinates\", true},\n\t{\"label\", {0.25, 0.5}; \"Irreversably delete paintable?\"},\n\t{\"image_button_exit\", {4.75, 0.25}; {0.5, 0.5}; \"epidermis_check.png\"; \"confirm\"; \"\"},\n\t{\"tooltip\", \"confirm\", \"Confirm\"},\n\t{\"image_button_exit\", {5.25, 0.25}; {0.5, 0.5}; \"epidermis_cross.png\"; \"close\"; \"\"},\n\t{\"tooltip\", \"close\", \"Close\"},\n}\nfunction entity_def:_show_delete_formspec(player)\n\tfslib.show_formspec(player, delete_confirmation_fs, function(fields)\n\t\tif fields.confirm then\n\t\t\tself:_delete()\n\t\tend\n\tend)\nend\n```\n\n(from [`epidermis`](https://github.com/appgurueu/epidermis), slightly modified)\n\nNote:\n\n* The (static) formspec is built at load time to improve performance\n* The formspec field handler obtains `self` - in this case an entity - as context\n","maintainers":["LMD"],"media_license":"MIT","name":"fslib","provides":["fslib"],"release":15326,"repo":"https://github.com/appgurueu/fslib","score":11.2,"screenshots":["https://content.luanti.org/uploads/81320e39e4.png"],"short_description":"Formspec string builder & event handler callbacks","state":"APPROVED","tags":["gui","library"],"thumbnail":"https://content.luanti.org/thumbnails/1/81320e39e4.png","title":"Formspec Library","translation_url":null,"type":"mod","url":"https://content.luanti.org/packages/LMD/fslib/releases/15326/download/","video_thumbnail_url":null,"video_url":null,"website":null,"dependencies":{"LMD/fslib":[]},"hash":"0b0pb9876s2s3zmb0664qdqdjr3y4vbhgll70wjkybbxvc0yqa8c"}